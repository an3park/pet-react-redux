(this.webpackJsonpcrapet=this.webpackJsonpcrapet||[]).push([[0],{76:function(e,a,t){e.exports=t(87)},87:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(8),c=t(128),s=t(129),i=t(32),o=(t(85),t(51)),u=t(69),m=Object(u.a)({overrides:{MuiCssBaseline:{"@global":{"*":{boxSizing:"border-box"},body:{paddingTop:"2rem"}}}},palette:{text:{secondary:o.a[400]}}}),d=t(18),p=t(122),v=t(124),f=t(134),b=t(131),E=t(125),g=t(119),h=t(133),O=t(121),j=Object(g.a)((function(e){return Object(h.a)({root:{display:"flex",alignItems:"center",width:e.spacing(42),height:e.spacing(11),paddingRight:e.spacing(1),position:"relative"},counter:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"stretch",flexBasis:e.spacing(9),flexShrink:0,backgroundColor:e.palette.background.default,padding:e.spacing(1)},avatarWrapper:{flexShrink:0,margin:e.spacing(0,2)},avatar:{width:e.spacing(6),height:e.spacing(6),backgroundColor:O.a[500],color:e.palette.getContrastText(O.a[500])},names:{overflow:"hidden",minWidth:e.spacing(20)},email:{display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},adduser:{justifyContent:"center",borderWidth:3,borderStyle:"dashed",borderColor:e.palette.text.secondary},cross:{position:"absolute",top:0,right:0,minWidth:"auto",padding:e.spacing(.8,1.8),fontSize:"1.2rem"}})})),y=function(e){var a,t,n,l,c,s=j();return e.skeleton||(a=e.user.firstname,t=e.user.lastname,n=e.user.email,l=(a.charAt(0)+t.charAt(0)).toUpperCase(),c=function(){e.user._id&&e.onClose(e.user._id)}),r.a.createElement(p.a,{className:s.root,elevation:3,square:!0},r.a.createElement("div",{className:s.counter},r.a.createElement(v.a,{color:"textSecondary",variant:"h4"},e.skeleton?"":"#".concat(e.index))),r.a.createElement("div",{className:s.avatarWrapper},e.skeleton?r.a.createElement(E.a,{variant:"circle"},r.a.createElement(f.a,{className:s.avatar})):r.a.createElement(f.a,{className:s.avatar},l)),r.a.createElement("div",{className:s.names},r.a.createElement(v.a,null,e.skeleton?r.a.createElement(E.a,null):"".concat(a," ").concat(t)),r.a.createElement(v.a,{variant:"caption",color:"textSecondary",className:s.email},e.skeleton?r.a.createElement(E.a,null):n)),c&&r.a.createElement(b.a,{onClick:c,className:s.cross},"\xd7"))},x=t(126),S=t(127),k=function(e){var a=e.onClick,t=j();return r.a.createElement(b.a,{className:t.root+" "+t.adduser,onClick:a},r.a.createElement(v.a,{variant:"h4",color:"textSecondary"},"+"))},w=t(27),C=t(10),N=t(132),D=t(130),I=Object(g.a)((function(e){return Object(h.a)({root:{display:"flex",justifyContent:"center",alignItems:"center"},body:{padding:e.spacing(4),border:"4px solid #aaa",outline:"none"},textFilelds:{margin:e.spacing(1),width:"100%"},form:{display:"flex",flexDirection:"column",alignItems:"center",width:e.spacing(40)},button:{alignSelf:"flex-end"}})})),T=function(e){var a=e.onClose,t=e.onSave,l=I(),c=Object(n.useState)({firstname:{value:"",valid:!1,message:" "},lastname:{value:"",valid:!1,message:" "},email:{value:"",valid:!1,message:" "}}),s=Object(d.a)(c,2),i=s[0],o=s[1],u=Object(n.useState)(!1),m=Object(d.a)(u,2),f=m[0],E=m[1],g=function(e){var a=e.target,t=a.value,n=a.name,r=!1,l=" ";switch(n){case"email":!(r=/^\w+@\w+\.\w+$/.test(t))&&(l="Incorrect e-mail");break;default:!(r=t.length>2)&&(l="please, fill ".concat(n," 3+ characters"))}o((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(w.a)({},n,{value:t,valid:r,message:l}))}))};return r.a.createElement(N.a,{open:!0,onClose:a,className:l.root},r.a.createElement(p.a,{className:l.body},r.a.createElement(v.a,{variant:"h6"},"Create user"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),E(!0),t&&Object.values(i).every((function(e){return e.valid}))&&t({firstname:i.firstname.value,lastname:i.lastname.value,email:i.email.value})},className:l.form},r.a.createElement(D.a,{className:l.textFilelds,size:"small",label:"First name",variant:"outlined",required:!0,name:"firstname",value:i.firstname.value,onInput:g,error:f&&!i.firstname.valid,helperText:f?i.firstname.message:" "}),r.a.createElement(D.a,{className:l.textFilelds,size:"small",label:"Last name",variant:"outlined",required:!0,name:"lastname",value:i.lastname.value,onInput:g,error:f&&!i.lastname.valid,helperText:f?i.lastname.message:" "}),r.a.createElement(D.a,{className:l.textFilelds,size:"small",label:"E-mail",variant:"outlined",required:!0,name:"email",value:i.email.value,onInput:g,error:f&&!i.email.valid,helperText:f?i.email.message:" "}),r.a.createElement(b.a,{className:l.button,type:"submit",color:"primary",variant:"contained"},"Save"))))},R=t(11),U=t.n(R),_=t(16),A=t(52);function F(e){return{type:"USERS/LOADING",payload:e}}var L=function(){var e=Object(n.useState)(!1),a=Object(d.a)(e,2),t=a[0],l=a[1],c=Object(i.c)((function(e){return e.users.users})),s=Object(i.c)((function(e){return e.users.loading})),o=Object(i.b)();Object(n.useEffect)((function(){o(function(){var e=Object(_.a)(U.a.mark((function e(a){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(F(!0)),e.next=4,A.a.get("/api/user").json();case 4:t=e.sent,a({type:"USERS/FETCH",payload:t}),a(F(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message||e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}())}),[]);var u=function(e){o(function(e){return function(){var a=Object(_.a)(U.a.mark((function a(t){var n;return U.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n={id:e},a.next=4,A.a.delete("/api/user",{searchParams:n}).json();case 4:t({type:"USERS/DELETE",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error(a.t0.message||a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(e))};return r.a.createElement(x.a,null,r.a.createElement(S.a,{container:!0,spacing:2},s?new Array(4).fill(null).map((function(e,a){return r.a.createElement(S.a,{key:a,item:!0},r.a.createElement(y,{skeleton:!0}))})):c.map((function(e,a){return r.a.createElement(S.a,{key:e.email,item:!0},r.a.createElement(y,{onClose:u,skeleton:!1,user:e,index:a+1}))})),!s&&r.a.createElement(S.a,{item:!0},r.a.createElement(k,{onClick:function(){return l(!0)}}))),t&&r.a.createElement(T,{onClose:function(){return l(!1)},onSave:function(e){var a;o((a=e,function(){var e=Object(_.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("/api/user",{json:a}).json();case 3:n=e.sent,t({type:"USERS/ADD",payload:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message||e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}())),l(!1)}}))},z=t(20),W=t(68),q=t(42),B={users:[],loading:!0};var G=Object(z.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USERS/FETCH":return Object(C.a)(Object(C.a)({},e),{},{users:a.payload});case"USERS/LOADING":return Object(C.a)(Object(C.a)({},e),{},{loading:a.payload});case"USERS/ADD":return Object(C.a)(Object(C.a)({},e),{},{users:[].concat(Object(q.a)(e.users),[a.payload])});case"USERS/DELETE":var t=e.users.filter((function(e){return e._id!==a.payload}));return Object(C.a)(Object(C.a)({},e),{},{users:t});default:return e}}}),H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.d,J=Object(z.e)(G,H(Object(z.a)(W.a))),M=r.a.createElement(c.a,{theme:m},r.a.createElement(s.a,null),r.a.createElement(i.a,{store:J},r.a.createElement(L,null)));Object(l.render)(M,document.getElementById("app"))}},[[76,1,2]]]);
//# sourceMappingURL=main.20577210.chunk.js.map